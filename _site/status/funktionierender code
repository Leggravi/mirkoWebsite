hier der code, wo die Datumszuordnung richtig funktioniert
https://chatgpt.com/c/692349c6-9be4-832d-a289-c292518b1c14


<script src="https://cdn.jsdelivr.net/npm/exifreader@4.12.0/dist/exif-reader.min.js"></script>

<script>
console.log("%cðŸš€ EXIF DEBUG MODUS â€“ ExifReader aktiv", "font-size:16px;color:#0a0");

var IMAGES = [
{% assign first = true %}
{% for f in site.static_files %}
  {% if f.path contains '/assets/img/' and (f.extname == '.png' or f.extname == '.jpg' or f.extname == '.jpeg' or f.extname == '.webp') %}
    {% unless first %},{% endunless %}
    {
      url: {{ f.path | relative_url | jsonify }},
      name: {{ f.name | jsonify }}
    }
    {% assign first = false %}
  {% endif %}
{% endfor %}
];
console.log("ðŸ“‚ Gefundene Bilder:", IMAGES);


// Format-Helfer
function pad(n){ return n<10 ? '0'+n : String(n); }
function formatGerman(d){
  if(!d) return "âš  Kein Datum";
  return `${pad(d.getDate())}.${pad(d.getMonth()+1)}.${String(d.getFullYear()).slice(-2)} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
}


// HEAD fallback
async function probeLastModified(url){
  try{
    const res = await fetch(url, {method:"HEAD"});
    const lm = res.headers.get("last-modified");
    console.log("ðŸ”Ž HEAD:", url, "â†’", lm);
    return lm ? new Date(lm) : null;
  }catch(e){
    console.warn("HEAD Fehler:", e);
    return null;
  }
}


// EXIF + Debug
async function getImageDate(url){
  console.log(`\n==========================\nðŸ“¸ BILD: ${url}\n==========================`);

  try{
    const res = await fetch(url);
    const buffer = await res.arrayBuffer();

    const tags = ExifReader.load(buffer);
    console.log("ðŸ“‘ EXIF-Tags:", tags);

    // ExifReader: .description ist der Wert
    const fields = [
      "DateTimeOriginal",
      "CreateDate",
      "DateTimeDigitized",
      "ModifyDate",
      "DateTime"
    ];

    let exifDateStr = null;

    for(const f of fields){
      if(tags[f] && tags[f].description){
        console.log(`ðŸ” ${f}:`, tags[f].description);
        exifDateStr = tags[f].description;
        break;
      } else {
        console.log(`âšª ${f}: nicht vorhanden`);
      }
    }

    if(exifDateStr){
      console.log("â³ Gefundenes EXIF-Datum:", exifDateStr);
      const norm = exifDateStr.replace(/^(\d{4}):(\d{2}):/, "$1-$2-");
      const date = new Date(norm);
      console.log("ðŸ“… EXIF nach Normalize:", date);
      if(!isNaN(date)) return date;
    }

    console.warn("âš  Keine nutzbaren EXIF-Daten");
  }catch(e){
    console.error("âŒ EXIF Fehler:", e);
  }

  // HEAD Fallback
  return await probeLastModified(url);
}


// Gruppierung
function getGroup(date){
  if(!date) return "Ohne Datum";

  const now = new Date();
  const d = new Date(date);
  const oneDay = 24*60*60*1000;

  if(d.toDateString() === now.toDateString()) return "Heute";
  if(now - d < oneDay*2 && d.getDate() === now.getDate()-1) return "Gestern";
  if(d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear())
    return "Dieser Monat";

  return `${d.getMonth()+1}/${d.getFullYear()}`;
}


async function render(){
  const container = document.getElementById("image-list");
  container.innerHTML = "";

  const results = await Promise.all(IMAGES.map(async img => {
    const date = await getImageDate(img.url);
    console.log("ðŸ“Œ FINAL DATE:", img.url, date);
    return {...img, date};
  }));

  // sortieren
  results.sort((a,b)=>{
    if(a.date && b.date) return b.date - a.date;
    if(a.date) return -1;
    if(b.date) return 1;
    return a.name.localeCompare(b.name);
  });

  // Gruppen bilden
  const groups = {};
  results.forEach(r=>{
    const g = getGroup(r.date);
    if(!groups[g]) groups[g] = [];
    groups[g].push(r);
  });

  // rendern
  for(const g in groups){
    const h = document.createElement("h2");
    h.textContent = g;
    h.style.marginTop = "2rem";
    container.appendChild(h);

    const grid = document.createElement("div");
    grid.style.display = "grid";
    grid.style.gridTemplateColumns = "repeat(auto-fill,minmax(200px,1fr))";
    grid.style.gap = "1rem";
    container.appendChild(grid);

    groups[g].forEach(item=>{
      const card = document.createElement("div");
      card.style.border = "1px solid #ddd";
      card.style.borderRadius = "8px";
      card.style.padding = "8px";

      const img = document.createElement("img");
      img.src = item.url;
      img.style.width = "100%";
      img.style.height = "140px";
      img.style.objectFit = "cover";

      const name = document.createElement("div");
      name.textContent = item.name;
      name.style.fontSize = "0.85rem";

      const date = document.createElement("div");
      date.textContent = formatGerman(item.date);
      date.style.color = "#666";
      date.style.fontSize = "0.8rem";

      card.appendChild(img);
      card.appendChild(name);
      card.appendChild(date);

      grid.appendChild(card);
    });
  }
}

document.addEventListener("DOMContentLoaded", render);
</script>
